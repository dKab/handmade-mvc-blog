{% extends "main.html.twig" %}

{% block title title|title %}
{% block styles %}
    {{ parent() }}
    <style type="text/css">
        .comment_brief {
            background: #EED8FC;
            border: 1px solid #F0D0B6;
            border-radius: 5px;
            margin-top: 10px;
            padding: 10px;
        }
        .name {
            color: salmon;
        }
    </style>
{% endblock %}
{% block content %}
   {% if comments is not empty %}
    {% for comment in comments %}
<div class="comment_brief">
    <div class="comment_head">
        <p class="time">Добавлен: {{ comment.time|date('d/m/y') }}</p>
        к посту <a href="/admin/view?id={{ comment.post_id }}">
                           {{ (comment.postTitle|length < 20) ? comment.postTitle : comment.postTitle|slice(0, 20) ~ '...' }}</a>
        <p class="name">{{ comment.name }}</p>
        <p class="body">{{ comment.body|nl2br }}</p>
        <p>Статус: <span class="{{ (comment.status == constant('CommentManager::APPROVED') )? "status published" : "status" }}">{{ comment.fancyStatus }}<span></p>
    </div>
    <p class="options">
        <a href="/admin/deleteComment?id={{ comment.id }}">Удалить</a>
              {% if comment.status == constant('CommentManager::PENDING') %}
        | <a href="/admin/approve?id={{ comment.id }}">Утвердить</a>
              {% endif %}
    </p>
</div>
    {% endfor %}
    {% import 'manage.html.twig' as manage %}
      {{ manage.pagination(page, limit, lastPage, curURL, query) }}
  {% else %}
    Комментариев пока нет
  {% endif %}
{% endblock %}
